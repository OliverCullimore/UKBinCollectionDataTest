{"uid":"5282ba5574b919d6","name":"Validate Council Output [BromleyBoroughCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"7f3dc7acf0fc90eded39e25c4ed3bb60","time":{"start":1695156940634,"stop":1695156941706,"duration":1072},"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find_all'","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[BromleyBoroughCouncil]>>\n_pytest_bdd_example = {'council': 'BromleyBoroughCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:65: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <BromleyBoroughCouncil.CouncilClass object at 0x7f9a06dd8cd0>\npage = <Response [503]>\nkwargs = {'paon': None, 'postcode': None, 'uprn': None, 'url': 'https://recyclingservices.bromley.gov.uk/waste/6087017', ...}\nsoup = <!DOCTYPE html>\n\n<html class=\"no-js\" lang=\"en-gb\">\n<head>\n<meta content=\"initial-scale=1.0\" name=\"viewport\"/>\n<meta co...://www.youtube.com/user/LBBromley\" target=\"_blank\" title=\"Youtube\"></a>\n</div>\n</nav>\n</div>\n</footer>\n</body>\n</html>\n\nbin_data_dict = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        bin_data_dict = {\"bins\": []}\n    \n        # Search for the specific bin in the table using BS4\n>       rows = soup.find(\"div\", class_=(\"waste__collections\")).find_all(\n            \"h3\",\n            class_=(\"waste-service-name\",),\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find_all'\n\nuk_bin_collection/uk_bin_collection/councils/BromleyBoroughCouncil.py:25: AttributeError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find_all'","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[BromleyBoroughCouncil]>>\n_pytest_bdd_example = {'council': 'BromleyBoroughCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:65: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <BromleyBoroughCouncil.CouncilClass object at 0x7f9a06dd8cd0>\npage = <Response [503]>\nkwargs = {'paon': None, 'postcode': None, 'uprn': None, 'url': 'https://recyclingservices.bromley.gov.uk/waste/6087017', ...}\nsoup = <!DOCTYPE html>\n\n<html class=\"no-js\" lang=\"en-gb\">\n<head>\n<meta content=\"initial-scale=1.0\" name=\"viewport\"/>\n<meta co...://www.youtube.com/user/LBBromley\" target=\"_blank\" title=\"Youtube\"></a>\n</div>\n</nav>\n</div>\n</footer>\n</body>\n</html>\n\nbin_data_dict = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        bin_data_dict = {\"bins\": []}\n    \n        # Search for the specific bin in the table using BS4\n>       rows = soup.find(\"div\", class_=(\"waste__collections\")).find_all(\n            \"h3\",\n            class_=(\"waste-service-name\",),\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find_all'\n\nuk_bin_collection/uk_bin_collection/councils/BromleyBoroughCouncil.py:25: AttributeError","steps":[{"name":"Given the council: BromleyBoroughCouncil","time":{"start":1695156940635,"stop":1695156940636,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from BromleyBoroughCouncil","time":{"start":1695156940636,"stop":1695156941706,"duration":1070},"status":"failed","statusMessage":"'NoneType' object has no attribute 'find_all'","statusTrace":"AttributeError: 'NoneType' object has no attribute 'find_all'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az471-320"},{"name":"thread","value":"2149-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BromleyBoroughCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":9,"broken":0,"skipped":0,"passed":76,"unknown":0,"total":85},"items":[{"uid":"bab7884c0be34fd8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/930//#testresult/bab7884c0be34fd8","status":"passed","time":{"start":1695086044385,"stop":1695086045556,"duration":1171}},{"uid":"567d1c725edd9b67","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/929//#testresult/567d1c725edd9b67","status":"passed","time":{"start":1694999594158,"stop":1694999595339,"duration":1181}},{"uid":"64b29a995b09ae7c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/928//#testresult/64b29a995b09ae7c","status":"passed","time":{"start":1694987800907,"stop":1694987801800,"duration":893}},{"uid":"a5b267d7ab7381f1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/926//#testresult/a5b267d7ab7381f1","status":"passed","time":{"start":1694987662886,"stop":1694987663790,"duration":904}},{"uid":"670362afbfe5a39b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/922//#testresult/670362afbfe5a39b","status":"passed","time":{"start":1694971639957,"stop":1694971641136,"duration":1179}},{"uid":"2546cc5eaa620593","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/920//#testresult/2546cc5eaa620593","status":"passed","time":{"start":1694913409547,"stop":1694913410508,"duration":961}},{"uid":"deb1016bdc067da0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/919//#testresult/deb1016bdc067da0","status":"passed","time":{"start":1694892731375,"stop":1694892732542,"duration":1167}},{"uid":"3b066718bce2958d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/917//#testresult/3b066718bce2958d","status":"passed","time":{"start":1694889733034,"stop":1694889733931,"duration":897}},{"uid":"d03326cd816c9a22","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/915//#testresult/d03326cd816c9a22","status":"passed","time":{"start":1694864595253,"stop":1694864596366,"duration":1113}},{"uid":"f1448ffa55cdd5af","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/913//#testresult/f1448ffa55cdd5af","status":"passed","time":{"start":1694840278463,"stop":1694840279355,"duration":892}},{"uid":"fb5d05d535339869","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/912//#testresult/fb5d05d535339869","status":"passed","time":{"start":1694826670592,"stop":1694826673645,"duration":3053}},{"uid":"55add0e34d47c87","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/910//#testresult/55add0e34d47c87","status":"passed","time":{"start":1694796692508,"stop":1694796693697,"duration":1189}},{"uid":"14098c1bf679911","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/906//#testresult/14098c1bf679911","status":"passed","time":{"start":1694740416225,"stop":1694740417163,"duration":938}},{"uid":"b2cfd366c9c388da","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/905//#testresult/b2cfd366c9c388da","status":"passed","time":{"start":1694653905461,"stop":1694653908375,"duration":2914}},{"uid":"61ecd99b53e1e0b5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/904//#testresult/61ecd99b53e1e0b5","status":"passed","time":{"start":1694567637832,"stop":1694567639012,"duration":1180}},{"uid":"a180cd412eeaaf3c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/903//#testresult/a180cd412eeaaf3c","status":"passed","time":{"start":1694481057816,"stop":1694481059951,"duration":2135}},{"uid":"1bdfddd546ad43a8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/902//#testresult/1bdfddd546ad43a8","status":"passed","time":{"start":1694394806797,"stop":1694394807756,"duration":959}},{"uid":"7d016ad8f455ee77","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/901//#testresult/7d016ad8f455ee77","status":"passed","time":{"start":1694365130209,"stop":1694365134355,"duration":4146}},{"uid":"2ed9db901b5de0af","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/899//#testresult/2ed9db901b5de0af","status":"passed","time":{"start":1694308587481,"stop":1694308588342,"duration":861}},{"uid":"b3a55af6dd0a071e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/891//#testresult/b3a55af6dd0a071e","status":"passed","time":{"start":1694240251457,"stop":1694240255950,"duration":4493}}]},"tags":[]},"source":"5282ba5574b919d6.json","parameterValues":["BromleyBoroughCouncil"]}