{"uid":"2c29c1b8d4bfefc4","name":"Validate Council Output [BromleyBoroughCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"7f3dc7acf0fc90eded39e25c4ed3bb60","time":{"start":1691112247349,"stop":1691112255624,"duration":8275},"status":"failed","statusMessage":"dateutil.parser._parser.ParserError: Unknown string format: Friday, 4th August\n              \n              (In progress)","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[BromleyBoroughCouncil]>>\n_pytest_bdd_example = {'council': 'BromleyBoroughCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:65: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/BromleyBoroughCouncil.py:38: in parse_data\n    date = dateutil.parser.parse(collectionDate[1].text.strip())\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/dateutil/parser/_parser.py:1368: in parse\n    return DEFAULTPARSER.parse(timestr, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <dateutil.parser._parser.parser object at 0x7ff2938ca800>\ntimestr = 'Friday, 4th August\\n              \\n              (In progress)'\ndefault = datetime.datetime(2023, 8, 4, 0, 0), ignoretz = False, tzinfos = None\nkwargs = {}, res = None, skipped_tokens = None\n\n    def parse(self, timestr, default=None,\n              ignoretz=False, tzinfos=None, **kwargs):\n        \"\"\"\n        Parse the date/time string into a :class:`datetime.datetime` object.\n    \n        :param timestr:\n            Any date/time string using the supported formats.\n    \n        :param default:\n            The default datetime object, if this is a datetime object and not\n            ``None``, elements specified in ``timestr`` replace elements in the\n            default object.\n    \n        :param ignoretz:\n            If set ``True``, time zones in parsed strings are ignored and a\n            naive :class:`datetime.datetime` object is returned.\n    \n        :param tzinfos:\n            Additional time zone names / aliases which may be present in the\n            string. This argument maps time zone names (and optionally offsets\n            from those time zones) to time zones. This parameter can be a\n            dictionary with timezone aliases mapping time zone names to time\n            zones or a function taking two parameters (``tzname`` and\n            ``tzoffset``) and returning a time zone.\n    \n            The timezones to which the names are mapped can be an integer\n            offset from UTC in seconds or a :class:`tzinfo` object.\n    \n            .. doctest::\n               :options: +NORMALIZE_WHITESPACE\n    \n                >>> from dateutil.parser import parse\n                >>> from dateutil.tz import gettz\n                >>> tzinfos = {\"BRST\": -7200, \"CST\": gettz(\"America/Chicago\")}\n                >>> parse(\"2012-01-19 17:21:00 BRST\", tzinfos=tzinfos)\n                datetime.datetime(2012, 1, 19, 17, 21, tzinfo=tzoffset(u'BRST', -7200))\n                >>> parse(\"2012-01-19 17:21:00 CST\", tzinfos=tzinfos)\n                datetime.datetime(2012, 1, 19, 17, 21,\n                                  tzinfo=tzfile('/usr/share/zoneinfo/America/Chicago'))\n    \n            This parameter is ignored if ``ignoretz`` is set.\n    \n        :param \\\\*\\\\*kwargs:\n            Keyword arguments as passed to ``_parse()``.\n    \n        :return:\n            Returns a :class:`datetime.datetime` object or, if the\n            ``fuzzy_with_tokens`` option is ``True``, returns a tuple, the\n            first element being a :class:`datetime.datetime` object, the second\n            a tuple containing the fuzzy tokens.\n    \n        :raises ParserError:\n            Raised for invalid or unknown string format, if the provided\n            :class:`tzinfo` is not in a valid format, or if an invalid date\n            would be created.\n    \n        :raises TypeError:\n            Raised for non-string or character stream input.\n    \n        :raises OverflowError:\n            Raised if the parsed date exceeds the largest valid C integer on\n            your system.\n        \"\"\"\n    \n        if default is None:\n            default = datetime.datetime.now().replace(hour=0, minute=0,\n                                                      second=0, microsecond=0)\n    \n        res, skipped_tokens = self._parse(timestr, **kwargs)\n    \n        if res is None:\n>           raise ParserError(\"Unknown string format: %s\", timestr)\nE           dateutil.parser._parser.ParserError: Unknown string format: Friday, 4th August\nE                         \nE                         (In progress)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/dateutil/parser/_parser.py:643: ParserError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"dateutil.parser._parser.ParserError: Unknown string format: Friday, 4th August\n              \n              (In progress)","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[BromleyBoroughCouncil]>>\n_pytest_bdd_example = {'council': 'BromleyBoroughCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:65: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/BromleyBoroughCouncil.py:38: in parse_data\n    date = dateutil.parser.parse(collectionDate[1].text.strip())\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/dateutil/parser/_parser.py:1368: in parse\n    return DEFAULTPARSER.parse(timestr, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <dateutil.parser._parser.parser object at 0x7ff2938ca800>\ntimestr = 'Friday, 4th August\\n              \\n              (In progress)'\ndefault = datetime.datetime(2023, 8, 4, 0, 0), ignoretz = False, tzinfos = None\nkwargs = {}, res = None, skipped_tokens = None\n\n    def parse(self, timestr, default=None,\n              ignoretz=False, tzinfos=None, **kwargs):\n        \"\"\"\n        Parse the date/time string into a :class:`datetime.datetime` object.\n    \n        :param timestr:\n            Any date/time string using the supported formats.\n    \n        :param default:\n            The default datetime object, if this is a datetime object and not\n            ``None``, elements specified in ``timestr`` replace elements in the\n            default object.\n    \n        :param ignoretz:\n            If set ``True``, time zones in parsed strings are ignored and a\n            naive :class:`datetime.datetime` object is returned.\n    \n        :param tzinfos:\n            Additional time zone names / aliases which may be present in the\n            string. This argument maps time zone names (and optionally offsets\n            from those time zones) to time zones. This parameter can be a\n            dictionary with timezone aliases mapping time zone names to time\n            zones or a function taking two parameters (``tzname`` and\n            ``tzoffset``) and returning a time zone.\n    \n            The timezones to which the names are mapped can be an integer\n            offset from UTC in seconds or a :class:`tzinfo` object.\n    \n            .. doctest::\n               :options: +NORMALIZE_WHITESPACE\n    \n                >>> from dateutil.parser import parse\n                >>> from dateutil.tz import gettz\n                >>> tzinfos = {\"BRST\": -7200, \"CST\": gettz(\"America/Chicago\")}\n                >>> parse(\"2012-01-19 17:21:00 BRST\", tzinfos=tzinfos)\n                datetime.datetime(2012, 1, 19, 17, 21, tzinfo=tzoffset(u'BRST', -7200))\n                >>> parse(\"2012-01-19 17:21:00 CST\", tzinfos=tzinfos)\n                datetime.datetime(2012, 1, 19, 17, 21,\n                                  tzinfo=tzfile('/usr/share/zoneinfo/America/Chicago'))\n    \n            This parameter is ignored if ``ignoretz`` is set.\n    \n        :param \\\\*\\\\*kwargs:\n            Keyword arguments as passed to ``_parse()``.\n    \n        :return:\n            Returns a :class:`datetime.datetime` object or, if the\n            ``fuzzy_with_tokens`` option is ``True``, returns a tuple, the\n            first element being a :class:`datetime.datetime` object, the second\n            a tuple containing the fuzzy tokens.\n    \n        :raises ParserError:\n            Raised for invalid or unknown string format, if the provided\n            :class:`tzinfo` is not in a valid format, or if an invalid date\n            would be created.\n    \n        :raises TypeError:\n            Raised for non-string or character stream input.\n    \n        :raises OverflowError:\n            Raised if the parsed date exceeds the largest valid C integer on\n            your system.\n        \"\"\"\n    \n        if default is None:\n            default = datetime.datetime.now().replace(hour=0, minute=0,\n                                                      second=0, microsecond=0)\n    \n        res, skipped_tokens = self._parse(timestr, **kwargs)\n    \n        if res is None:\n>           raise ParserError(\"Unknown string format: %s\", timestr)\nE           dateutil.parser._parser.ParserError: Unknown string format: Friday, 4th August\nE                         \nE                         (In progress)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/dateutil/parser/_parser.py:643: ParserError","steps":[{"name":"Given the council: BromleyBoroughCouncil","time":{"start":1691112247349,"stop":1691112247350,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from BromleyBoroughCouncil","time":{"start":1691112247350,"stop":1691112255624,"duration":8274},"status":"failed","statusMessage":"Unknown string format: Friday, 4th August\n              \n              (In progress)","statusTrace":"dateutil.parser._parser.ParserError: Unknown string format: Friday, 4th August\n              \n              (In progress)\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az1231-597"},{"name":"thread","value":"2165-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BromleyBoroughCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":15,"unknown":0,"total":20},"items":[{"uid":"535dbe2efc2a52f1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/841//#testresult/535dbe2efc2a52f1","status":"passed","time":{"start":1691025898991,"stop":1691025906708,"duration":7717}},{"uid":"53d22a1fda57dde5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/840//#testresult/53d22a1fda57dde5","status":"passed","time":{"start":1690939258037,"stop":1690939265615,"duration":7578}},{"uid":"86a7a949397beacb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/839//#testresult/86a7a949397beacb","status":"passed","time":{"start":1690854005369,"stop":1690854019119,"duration":13750}},{"uid":"7b43fd702b489b0e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/838//#testresult/7b43fd702b489b0e","status":"passed","time":{"start":1690766726261,"stop":1690766732922,"duration":6661}},{"uid":"b82866fa795f86f6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/837//#testresult/b82866fa795f86f6","status":"passed","time":{"start":1690680385154,"stop":1690680391933,"duration":6779}},{"uid":"f8575c7da89110ba","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/836//#testresult/f8575c7da89110ba","status":"passed","time":{"start":1690593725818,"stop":1690593733634,"duration":7816}},{"uid":"336d4633d14a8e76","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/835//#testresult/336d4633d14a8e76","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1690563317619,"stop":1690563318847,"duration":1228}},{"uid":"cb913b302df118d0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/833//#testresult/cb913b302df118d0","status":"passed","time":{"start":1690562666696,"stop":1690562673258,"duration":6562}},{"uid":"6631683f29e3db52","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/832//#testresult/6631683f29e3db52","status":"failed","statusDetails":"dateutil.parser._parser.ParserError: Unknown string format: Friday, 28th July\n              \n              (In progress)","time":{"start":1690507302154,"stop":1690507315278,"duration":13124}},{"uid":"f593e24a85c51fa2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/831//#testresult/f593e24a85c51fa2","status":"passed","time":{"start":1690420875438,"stop":1690420881864,"duration":6426}},{"uid":"b128f7a28c47af0c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/830//#testresult/b128f7a28c47af0c","status":"passed","time":{"start":1690335450793,"stop":1690335457942,"duration":7149}},{"uid":"a69c362288020dd5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/829//#testresult/a69c362288020dd5","status":"passed","time":{"start":1690249572011,"stop":1690249579647,"duration":7636}},{"uid":"ed996583a4939502","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/828//#testresult/ed996583a4939502","status":"passed","time":{"start":1690162632156,"stop":1690162639215,"duration":7059}},{"uid":"731b338c07cbe154","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/827//#testresult/731b338c07cbe154","status":"passed","time":{"start":1690123289110,"stop":1690123295899,"duration":6789}},{"uid":"e67f25b2aa81b568","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/824//#testresult/e67f25b2aa81b568","status":"passed","time":{"start":1690106861517,"stop":1690106869153,"duration":7636}},{"uid":"a345796702f9b4a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/822//#testresult/a345796702f9b4a","status":"failed","statusDetails":"TypeError: the JSON object must be str, bytes or bytearray, not NoneType","time":{"start":1690076517724,"stop":1690076531588,"duration":13864}},{"uid":"f05129ad1aa614c7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/821//#testresult/f05129ad1aa614c7","status":"failed","statusDetails":"TypeError: the JSON object must be str, bytes or bytearray, not NoneType","time":{"start":1690027360769,"stop":1690027368601,"duration":7832}},{"uid":"6cdede377d935b73","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/820//#testresult/6cdede377d935b73","status":"passed","time":{"start":1690025766685,"stop":1690025774373,"duration":7688}},{"uid":"d21c20b7b18bf111","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/813//#testresult/d21c20b7b18bf111","status":"passed","time":{"start":1689840886291,"stop":1689840892570,"duration":6279}}]},"tags":[]},"source":"2c29c1b8d4bfefc4.json","parameterValues":["BromleyBoroughCouncil"]}