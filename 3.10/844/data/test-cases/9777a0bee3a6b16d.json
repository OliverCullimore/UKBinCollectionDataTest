{"uid":"9777a0bee3a6b16d","name":"Validate Council Output [MaldonDistrictCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"53c5720a05c261e2bad5904bb33e19b7","time":{"start":1691285024083,"stop":1691285041203,"duration":17120},"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[MaldonDistrictCouncil]>>\n_pytest_bdd_example = {'council': 'MaldonDistrictCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MaldonDistrictCouncil.CouncilClass object at 0x7f83533f4880>, page = ''\nkwargs = {'paon': None, 'postcode': None, 'uprn': '100090557253', 'usrn': None}\ndata = {'bins': []}, uprn = '100090557253', response = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://maldon.suez.co.uk/maldon/ServiceSummary?uprn={uprn}\",\n            headers={\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.1; Win64; x64)\"},\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/MaldonDistrictCouncil.py:26: ValueError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[MaldonDistrictCouncil]>>\n_pytest_bdd_example = {'council': 'MaldonDistrictCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MaldonDistrictCouncil.CouncilClass object at 0x7f83533f4880>, page = ''\nkwargs = {'paon': None, 'postcode': None, 'uprn': '100090557253', 'usrn': None}\ndata = {'bins': []}, uprn = '100090557253', response = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://maldon.suez.co.uk/maldon/ServiceSummary?uprn={uprn}\",\n            headers={\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.1; Win64; x64)\"},\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/MaldonDistrictCouncil.py:26: ValueError","steps":[{"name":"Given the council: MaldonDistrictCouncil","time":{"start":1691285024083,"stop":1691285024084,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from MaldonDistrictCouncil","time":{"start":1691285024084,"stop":1691285041203,"duration":17119},"status":"failed","statusMessage":"No bin data found for provided UPRN.","statusTrace":"ValueError: No bin data found for provided UPRN.\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az254-511"},{"name":"thread","value":"2109-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"MaldonDistrictCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":19,"unknown":0,"total":22},"items":[{"uid":"522ca228a9a337d4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/843//#testresult/522ca228a9a337d4","status":"passed","time":{"start":1691198653554,"stop":1691198663036,"duration":9482}},{"uid":"9a873fbbbf5fcad0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/842//#testresult/9a873fbbbf5fcad0","status":"passed","time":{"start":1691112484354,"stop":1691112485754,"duration":1400}},{"uid":"6f388a1778c65d24","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/841//#testresult/6f388a1778c65d24","status":"passed","time":{"start":1691026095345,"stop":1691026096568,"duration":1223}},{"uid":"c52d91f40f879cd1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/840//#testresult/c52d91f40f879cd1","status":"passed","time":{"start":1690939554350,"stop":1690939555538,"duration":1188}},{"uid":"c32f9b6365b1f172","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/839//#testresult/c32f9b6365b1f172","status":"passed","time":{"start":1690854188307,"stop":1690854195348,"duration":7041}},{"uid":"617ab005e10e153a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/838//#testresult/617ab005e10e153a","status":"passed","time":{"start":1690766912042,"stop":1690766919446,"duration":7404}},{"uid":"3c1c180f38319c19","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/837//#testresult/3c1c180f38319c19","status":"passed","time":{"start":1690680663226,"stop":1690680664464,"duration":1238}},{"uid":"cc7817a3c8c9df91","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/836//#testresult/cc7817a3c8c9df91","status":"passed","time":{"start":1690593989349,"stop":1690593998482,"duration":9133}},{"uid":"62b78291afb25cd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/835//#testresult/62b78291afb25cd","status":"passed","time":{"start":1690563603714,"stop":1690563604848,"duration":1134}},{"uid":"c5b2c2f7f7ba30c1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/833//#testresult/c5b2c2f7f7ba30c1","status":"passed","time":{"start":1690562857836,"stop":1690562859501,"duration":1665}},{"uid":"762eed2f28e127c4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/832//#testresult/762eed2f28e127c4","status":"passed","time":{"start":1690507545430,"stop":1690507558758,"duration":13328}},{"uid":"2afefac19600fe54","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/831//#testresult/2afefac19600fe54","status":"passed","time":{"start":1690421102335,"stop":1690421103724,"duration":1389}},{"uid":"498ac9fde2f9c016","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/830//#testresult/498ac9fde2f9c016","status":"passed","time":{"start":1690335630469,"stop":1690335638426,"duration":7957}},{"uid":"63d37b050539ae56","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/829//#testresult/63d37b050539ae56","status":"passed","time":{"start":1690249755084,"stop":1690249763202,"duration":8118}},{"uid":"592c1bd72b5f31bc","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/828//#testresult/592c1bd72b5f31bc","status":"passed","time":{"start":1690162915955,"stop":1690162917251,"duration":1296}},{"uid":"328ae0dde3a8e3bc","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/827//#testresult/328ae0dde3a8e3bc","status":"passed","time":{"start":1690123473692,"stop":1690123474697,"duration":1005}},{"uid":"895974fcef1c3376","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/824//#testresult/895974fcef1c3376","status":"passed","time":{"start":1690107040962,"stop":1690107041902,"duration":940}},{"uid":"c6e2ae98d324955b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/822//#testresult/c6e2ae98d324955b","status":"failed","statusDetails":"TypeError: the JSON object must be str, bytes or bytearray, not NoneType","time":{"start":1690076709557,"stop":1690076714997,"duration":5440}},{"uid":"3ce6561471d8930f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/821//#testresult/3ce6561471d8930f","status":"failed","statusDetails":"TypeError: the JSON object must be str, bytes or bytearray, not NoneType","time":{"start":1690027519667,"stop":1690027520783,"duration":1116}},{"uid":"f3170b26c1cb3861","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/820//#testresult/f3170b26c1cb3861","status":"passed","time":{"start":1690025960490,"stop":1690025961750,"duration":1260}}]},"tags":[]},"source":"9777a0bee3a6b16d.json","parameterValues":["MaldonDistrictCouncil"]}